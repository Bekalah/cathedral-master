{
  "$schema": "https://turbo.build/schema.json",
  "tasks": {
    "//# Shared Build Configuration": {
      "dependsOn": ["^//#build"]
    },
    "//# Build Tasks": {
      "cache": true,
      "outputs": ["dist/**", "build/**", ".turbo/cache/**", "apps/**/out/**", "apps/**/.next/**"]
    },
    "//# Development Tasks": {
      "cache": false,
      "persistent": true
    },
    "build": {
      "dependsOn": [
        "^build"
      ],
      "outputs": [
        "dist/**",
        "build/**",
        ".turbo/cache/**",
        "apps/**/out/**",
        "apps/**/.next/**"
      ],
      "env": [
        "NODE_ENV"
      ]
    },
    "dev": {
      "cache": false,
      "persistent": true
    },
    "type-check": {
      "dependsOn": [
        "^build"
      ],
      "outputs": []
    },
    "lint": {
      "outputs": [],
      "env": [
        "NODE_ENV"
      ]
    },
    "test": {
      "dependsOn": [
        "build"
      ],
      "outputs": [
        "coverage/**",
        ".nyc_output/**"
      ],
      "env": [
        "NODE_ENV",
        "CI"
      ]
    },
    "clean": {
      "outputs": [],
      "cache": false
    },
    "trauma-safety": {
      "cache": false,
      "outputs": [
        "data/trauma-safety-report.json"
      ],
      "inputs": [
        "tools/trauma-safety-validator.js",
        "apps/**/*.{js,jsx,ts,tsx}",
        "**/*.html"
      ]
    },
    "fusion-kink-generate": {
      "cache": false,
      "outputs": [
        "data/fusion-kink-generated.json"
      ],
      "inputs": [
        "tools/fusion-kink-generator.js",
        "data/complete-arcana-profiles.json"
      ]
    },
    "sacred-geometry-generate": {
      "cache": false,
      "outputs": [
        "data/sacred-geometry-generated.json"
      ],
      "inputs": [
        "tools/sacred-geometry-engine.js"
      ]
    },
    "gem-tower-generate": {
      "cache": false,
      "outputs": [
        "data/gem-tower-generated.json"
      ],
      "inputs": [
        "tools/gem-tower-engine.js"
      ]
    },
    "generate-all-engines": {
      "dependsOn": [
        "fusion-kink-generate",
        "sacred-geometry-generate",
        "gem-tower-generate"
      ],
      "outputs": [
        "data/**/*-generated.json"
      ],
      "cache": false
    },
    "validate-all-systems": {
      "dependsOn": [
        "trauma-safety"
      ],
      "outputs": [
        "data/validation-reports/**"
      ],
      "cache": false
    },
    "build-system-packages": {
      "dependsOn": [
        "^build",
        "generate-all-engines"
      ],
      "outputs": [
        "build-system/output/**"
      ],
      "inputs": [
        "build-system/**/*.js",
        "build-system/**/*.json"
      ]
    },
    "cathedral-engines": {
      "dependsOn": [
        "generate-all-engines",
        "trauma-safety"
      ],
      "outputs": [
        "data/**/*-generated.json",
        "data/trauma-safety-report.json"
      ],
      "cache": false
    },
    "db-init": {
      "cache": false,
      "outputs": [
        "data/cathedral.db"
      ],
      "inputs": [
        "lib/database/cathedral-db-pure.js"
      ]
    },
    "db-stats": {
      "dependsOn": [
        "db-init"
      ],
      "outputs": [
        "data/cathedral-db-stats.json"
      ],
      "cache": false
    },
    "db-export": {
      "dependsOn": [
        "db-init"
      ],
      "outputs": [
        "data/cathedral-db-export.json"
      ],
      "cache": false
    },
    "db-migrate": {
      "cache": false,
      "outputs": [
        "data/cathedral.db"
      ]
    },
    "version-tracking": {
      "cache": false,
      "outputs": [
        "versions/VERSION_MANIFEST.json",
        "versions/DEPLOYMENT_REPORT.json"
      ],
      "inputs": [
        "lib/online-offline-tracker.js",
        "godot/project.godot",
        "rust-engines/Cargo.toml",
        "deployment-configs/**"
      ]
    },
    "sync-platforms": {
      "dependsOn": [
        "version-tracking",
        "cathedral-engines"
      ],
      "cache": false,
      "outputs": [
        "deployment-configs/**",
        "apps/web/wrangler.toml"
      ]
    },
    "//# CI/CD Optimized Tasks": {
      "cache": true,
      "env": ["CI", "GITHUB_TOKEN", "GITHUB_REPOSITORY"]
    },
    "ci-build": {
      "dependsOn": [
        "^build",
        "generate-all-engines",
        "trauma-safety"
      ],
      "outputs": [
        "dist/**",
        "build/**",
        "data/**/*-generated.json",
        "data/trauma-safety-report.json"
      ]
    },
    "ci-deploy": {
      "dependsOn": [
        "ci-build"
      ],
      "cache": false
    }
  },
  "globalDependencies": [
    "**/*.json",
    "**/*.md",
    "**/.env",
    "tsconfig.json",
    "CATHEDRAL_INTEGRATION_MAP.json",
    "MASTER_INDEX.md",
    "openspec/**/*.json",
    "openspec/**/*.md",
    "openspec/cathedral-v1-standard.md"
  ],
  "globalEnv": [
    "NODE_ENV",
    "CI",
    "GITHUB_TOKEN",
    "GITHUB_REPOSITORY",
    "GITHUB_HEAD_REF",
    "GITHUB_BASE_REF",
    "AZURE_AI_STUDIO_ENDPOINT",
    "AZURE_AI_STUDIO_KEY",
    "VERCEL_TOKEN",
    "RENDER_TOKEN",
    "CLOUDFLARE_API_TOKEN"
  ]
}